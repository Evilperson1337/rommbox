<Window x:Class="RomMbox.UI.GamePropertiesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:converters="clr-namespace:RomMbox.UI.Converters"
        mc:Ignorable="d"
        Title="Game Properties"
        Height="620"
        Width="840"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        WindowStyle="ToolWindow"
        Background="#141822">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/RomMbox;component/UI/Resources.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <converters:BoolToVisibilityConverter x:Key="BoolToVisibility" />

            <Style x:Key="SectionHeader" TargetType="TextBlock">
                <Setter Property="Foreground" Value="#E6EBF5"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="Margin" Value="0,0,0,8"/>
            </Style>

            <Style x:Key="FieldLabel" TargetType="TextBlock">
                <Setter Property="Foreground" Value="#AAB4C8"/>
                <Setter Property="Margin" Value="0,0,0,4"/>
            </Style>

            <Style x:Key="InlineHelper" TargetType="TextBlock">
                <Setter Property="Foreground" Value="#6B748A"/>
                <Setter Property="FontSize" Value="12"/>
                <Setter Property="TextWrapping" Value="Wrap"/>
            </Style>

            <Style x:Key="DarkSecondaryButton" TargetType="Button">
                <Setter Property="Background" Value="#1C2230"/>
                <Setter Property="Foreground" Value="#E6EBF5"/>
                <Setter Property="BorderBrush" Value="#2D374B"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Padding" Value="8,4"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="Bd"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="4">
                                <ContentPresenter HorizontalAlignment="Center"
                                                  VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Bd" Property="BorderBrush" Value="#4A6EDC"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Bd" Property="Background" Value="#283042"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter TargetName="Bd" Property="Opacity" Value="0.6"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Margin="0,0,0,12">
            <TextBlock Text="Game Properties" FontSize="20" FontWeight="Bold" Foreground="#F5F7FF"/>
            <TextBlock Text="Review RomM metadata and installation details." Style="{StaticResource InlineHelper}"/>
        </StackPanel>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel>
                <Border Background="#141822" BorderBrush="#2D374B" BorderThickness="1" CornerRadius="4" Padding="12" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="RomM Game Info" Style="{StaticResource SectionHeader}"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="RomM ID" Style="{StaticResource FieldLabel}" Grid.Column="0"/>
                            <TextBlock Text="{Binding RommRomId}" Grid.Column="1"/>
                        </Grid>
                        <Grid Margin="0,6,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Platform" Style="{StaticResource FieldLabel}" Grid.Column="0"/>
                            <TextBlock Text="{Binding RommPlatformName}" Grid.Column="1"/>
                        </Grid>
                        <Grid Margin="0,6,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Platform ID" Style="{StaticResource FieldLabel}" Grid.Column="0"/>
                            <TextBlock Text="{Binding RommPlatformId}" Grid.Column="1"/>
                        </Grid>
                        <Grid Margin="0,6,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Server" Style="{StaticResource FieldLabel}" Grid.Column="0"/>
                            <TextBlock Text="{Binding ServerUrlDisplay}" Grid.Column="1"/>
                        </Grid>
                        <Grid Margin="0,6,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Version" Style="{StaticResource FieldLabel}" Grid.Column="0"/>
                            <TextBlock Text="{Binding RommVersion}" Grid.Column="1"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <Border Background="#141822" BorderBrush="#2D374B" BorderThickness="1" CornerRadius="4" Padding="12" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="Basic Info" Style="{StaticResource SectionHeader}"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Title" Style="{StaticResource FieldLabel}" Grid.Column="0"/>
                            <TextBlock Text="{Binding Title}" Grid.Column="1"/>
                        </Grid>
                        <Grid Margin="0,6,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Platform" Style="{StaticResource FieldLabel}" Grid.Column="0"/>
                            <TextBlock Text="{Binding PlatformName}" Grid.Column="1"/>
                        </Grid>
                        <Grid Margin="0,6,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Release Date" Style="{StaticResource FieldLabel}" Grid.Column="0"/>
                            <TextBlock Text="{Binding ReleaseDateDisplay}" Grid.Column="1"/>
                        </Grid>
                        <Grid Margin="0,6,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Genres" Style="{StaticResource FieldLabel}" Grid.Column="0"/>
                            <TextBlock Text="{Binding Genres}" Grid.Column="1"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <Border Background="#141822" BorderBrush="#2D374B" BorderThickness="1" CornerRadius="4" Padding="12">
                    <StackPanel>
                        <TextBlock Text="Installation Info" Style="{StaticResource SectionHeader}"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Installed" Style="{StaticResource FieldLabel}" Grid.Column="0"/>
                            <TextBlock Text="{Binding InstalledStatus}" Grid.Column="1"/>
                        </Grid>
                        <Grid Margin="0,6,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Installed Path" Style="{StaticResource FieldLabel}" Grid.Column="0"/>
                            <TextBlock Text="{Binding InstalledPath}" Grid.Column="1"/>
                        </Grid>
                        <Grid Margin="0,6,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Install Type" Style="{StaticResource FieldLabel}" Grid.Column="0"/>
                            <TextBlock Text="{Binding WindowsInstallType}" Grid.Column="1"/>
                        </Grid>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <StackPanel Grid.Row="2" Orientation="Vertical" Margin="0,16,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="View on RomM"
                        Width="140"
                        Margin="0,0,8,0"
                        Style="{StaticResource DarkSecondaryButton}"
                        Command="{Binding ViewOnRomMCommand}"
                        IsEnabled="{Binding CanViewOnRomM}"/>
                <Button Content="Update Game"
                        Width="140"
                        Margin="0,0,8,0"
                        Style="{StaticResource DarkSecondaryButton}"
                        Command="{Binding UpdateGameCommand}"
                        IsEnabled="{Binding CanUpdateGame}"/>
                <ProgressBar Width="120"
                             Height="12"
                             Margin="0,10,8,0"
                             VerticalAlignment="Center"
                             IsIndeterminate="True"
                             Visibility="{Binding IsBusy, Converter={StaticResource BoolToVisibility}}"/>
                <Button Content="Close" Width="120" Command="{Binding CloseCommand}"/>
            </StackPanel>
            <TextBlock Text="{Binding StatusText}" Foreground="#AAB4C8" Margin="0,8,0,0"/>
        </StackPanel>
    </Grid>
</Window>
